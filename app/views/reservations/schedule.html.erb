<style>
.special-form-control {

  padding: 0.375rem 0.75rem;
  font-size: 1rem;
  line-height: 1.5;
  color: #495057;
  background-color: #fff;
  background-clip: padding-box;
  border: 1px solid #ced4da;
  border-radius: 0.25rem;
  transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
}

.search-bar{
/*  background-color: rgb(3,131,155);
  border: solid 1px rgb(107, 177, 219);*/
  padding-left: 5px;
}
</style>

<div class="mt-100" style="padding-right: 15px;padding-left: 15px;">
<h2 class="text-center text-uppercase" style="font-weight:700;">Daily Schedule</h2>
<h4 class="text-center text-uppercase" style="font-weight:700;"><%= @schedule.strftime('%A, %d %B %Y') %></h4>
<div class="search-bar mt-2">
  <%= simple_form_for :reservation, wrapper: :inline_form, html: { class: 'form-inline' }, method: :get do |f| %>
      <%= f.text_field :date_on, inline_label: 'Search Date', type: 'date', min: Date.today.prev_month(3), max: Date.today.next_month(3), placeholder: "Select Date ...", type:"text", onfocus:"(this.type='date')", class: 'special-form-control', style: "height: 36px;width: 193px;"%>
       <%= f.button :submit, 'Submit', name: :nil, class: "btn btn-danger m-1", style: "height: 36px;" %>
  <% end %>
</div>
<div id="test"></div>

<!-- <button id="colorChange" class="btn-sm btn-danger">Change Random Color</button> -->
</div>

<script>
<% counter = 1 %>
<% number = 1 %>
"use strict";
let shiftObj = {
<% User.all.each do |x| %>
  <%if x.appointments.any? %>
    "<%= counter %>" : {
        "<%=x.first_name%>": [
        <% x.appointments.where(reservation_date: @date).each do |y|%>
            {"<%= rand(1..9).to_s %>" : "<%=y.reservation_time.strftime('%H:%M')%>-<%=y.end_time.strftime('%H:%M')%>"},
            <% number = number + 1 %>
        <% end %>
        <% number = 1%>
        ]
    },
    <% counter = counter + 1 %>
  <% end %>
<% end %>
};

let obj = {
    // Beginning Time
    startTime: "09:00",
    // Ending Time
    endTime: "20:00",
    // Time to divide(minute)
    divTime: "15",
    // Time Table
    shift: shiftObj,
    // Other options
    option: {
        // workTime include time not displaying
        workTime: true,
        bgcolor: ["#00FFFF"],
        // {index :  name, : index: name,,..}
    }
};
// Call Time Table
var instance = new TimeTable(obj);
 // eslint-disable-line
$(document).ready(function(){
  instance.init("#test");
});

// Change theme color sample
$(document).on("click","#colorChange", ()=>{
    let color = `${getColor()},${getColor()},${getColor()}`;
    document.documentElement.style.setProperty("--rgbTheme", color);
    console.log(color);
});
function getColor(){
    return Math.floor(Math.random() * Math.floor(255));
}

// finish table for schedule
</script>